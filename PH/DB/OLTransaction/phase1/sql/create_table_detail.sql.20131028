DROP TABLE OL_TXN_DETAIL CASCADE CONSTRAINTS;

CREATE TABLE OL_TXN_DETAIL
(
  OTD_TXN_ID                VARCHAR2(16 BYTE)   NOT NULL,
  OTD_TXN_CCY               CHAR(3 BYTE),
  OTD_TXN_COUNTRY           CHAR(2 BYTE),
  OTD_PAY_METHOD            VARCHAR2(50 BYTE),
  OTD_DEPOSIT_DATETIME      VARCHAR2(14 BYTE),
  OTD_BANK_ACCT_NUM         VARCHAR2(50 BYTE),
  OTD_DEPOSIT_BANK          VARCHAR2(150 BYTE),
  OTD_DEPOSIT_REF           VARCHAR2(150 BYTE),
  OTD_BANK_CODE             VARCHAR2(10 BYTE),
  OTD_BANK_NAME             VARCHAR2(50 BYTE),
  OTD_BRANCH_NAME           VARCHAR2(100 BYTE),
  OTD_ACCOUNT_ID            VARCHAR2(25 BYTE),
  OTD_ACCOUNT_NAME          VARCHAR2(100 BYTE),
  OTD_IDENTITY_ID           VARCHAR2(25 BYTE),
  OTD_PROVINCE              VARCHAR2(50 BYTE),
  OTD_PHONE_NO              VARCHAR2(25 BYTE),
  OTD_CITY                  VARCHAR2(100 BYTE),
  OTD_BATCH_ID              VARCHAR2(20 BYTE),
  OTD_LANGUAGE              CHAR(2 BYTE),
  OTD_SUCCESS_URL           VARCHAR2(255 BYTE),
  OTD_FAILURE_URL           VARCHAR2(255 BYTE),
  OTD_SUCCESS_CALLBACK_URL  VARCHAR2(255 BYTE),
  OTD_FAILURE_CALLBACK_URL  VARCHAR2(255 BYTE),
  OTD_ENCRYPT_TYPE          VARCHAR2(4 BYTE),
  OTD_OPEN_BAL              NUMBER(14,2),
  OTD_CURRENT_BAL           NUMBER(14,2),
  OTD_TOTAL_HOLD            NUMBER(14,2),
  OTD_VERSION_NO            INTEGER,
  OTD_REMARK                VARCHAR2(255 BYTE),
  OTD_SELECTED_PAY_METHOD   VARCHAR2(4 BYTE),
  OTD_BANNER_LOGO           VARCHAR2(255 BYTE),
  OTD_ECHO_MSG_1            VARCHAR2(50 BYTE),
  OTD_ECHO_MSG_2            VARCHAR2(50 BYTE),
  OTD_ECHO_MSG_3            VARCHAR2(50 BYTE),
  OTD_OPT_1                 VARCHAR2(50 BYTE),
  OTD_OPT_2                 VARCHAR2(50 BYTE),
  OTD_OPT_3                 VARCHAR2(50 BYTE),
  OTD_CREATE_USER           VARCHAR2(20 BYTE),
  OTD_CREATE_TIMESTAMP      DATE                DEFAULT sysdate,
  OTD_UPDATE_USER           VARCHAR2(20 BYTE),
  OTD_UPDATE_TIMESTAMP      DATE                DEFAULT sysdate
)
TABLESPACE USER_DATA
RESULT_CACHE (MODE DEFAULT)
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          9M
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE INDEX OL_TXN_DETAIL_IDX ON OL_TXN_DETAIL
(OTD_TXN_ID)
LOGGING
TABLESPACE USER_IDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          14M
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


CREATE INDEX OL_TXN_DETAIL_IDX01 ON OL_TXN_DETAIL
(OTD_TXN_ID, OTD_TXN_CCY)
LOGGING
TABLESPACE USER_IDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


CREATE INDEX OL_TXN_DETAIL_IDX02 ON OL_TXN_DETAIL
(OTD_REMARK, OTD_TXN_ID)
LOGGING
TABLESPACE USER_IDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


CREATE INDEX OL_TXN_DETAIL_IDX03 ON OL_TXN_DETAIL
(OTD_TXN_ID, OTD_TXN_COUNTRY)
LOGGING
TABLESPACE USER_IDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


CREATE INDEX OL_TXN_DETAIL_IDX04 ON OL_TXN_DETAIL
(OTD_TXN_ID, OTD_TXN_CCY, OTD_TXN_COUNTRY)
LOGGING
TABLESPACE USER_IDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;

CREATE INDEX OL_TXN_DETAIL_IDX05 ON OL_TXN_DETAIL
(OTD_BANK_CODE, OTD_BANK_ACCT_NUM, OTD_CREATE_TIMESTAMP)
LOGGING
TABLESPACE USER_IDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;

ALTER TABLE OL_TXN_DETAIL ADD (
  CONSTRAINT OL_TXN_DETAIL_FK01 
  FOREIGN KEY (OTD_TXN_ID) 
  REFERENCES OL_TXN_HEADER (OTH_TXN_ID)
  ENABLE VALIDATE);

