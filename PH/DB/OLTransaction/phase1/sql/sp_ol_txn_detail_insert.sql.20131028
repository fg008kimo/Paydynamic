create or replace function sp_ol_txn_detail_insert(
       in_txn_id                                ol_txn_detail.otd_txn_id%type,
       in_txn_ccy				ol_txn_detail.otd_txn_ccy%type,
       in_txn_country				ol_txn_detail.otd_txn_country%type,	
       in_pay_method				ol_txn_detail.otd_pay_method%type,
       in_deposit_datetime			ol_txn_detail.otd_deposit_datetime%type,
       in_bank_acct_num				ol_txn_detail.otd_bank_acct_num%type,
       in_deposit_bank				ol_txn_detail.otd_deposit_bank%type,
       in_deposit_ref				ol_txn_detail.otd_deposit_ref%type,
       in_bank_code				ol_txn_detail.otd_bank_code%type,
       in_bank_name				ol_txn_detail.otd_bank_name%type,
       in_branch_name				ol_txn_detail.otd_branch_name%type,
       in_account_id				ol_txn_detail.otd_account_id%type,
       in_account_name				ol_txn_detail.otd_account_name%type,
       in_identity_id				ol_txn_detail.otd_identity_id%type,
       in_province				ol_txn_detail.otd_province%type,
       in_phone_no				ol_txn_detail.otd_phone_no%type,
       in_city					ol_txn_detail.otd_city%type,
       in_batch_id				ol_txn_detail.otd_batch_id%type,
       in_language				ol_txn_detail.otd_language%type,
       in_success_url				ol_txn_detail.otd_success_url%type,
       in_failure_url				ol_txn_detail.otd_failure_url%type,
       in_success_callback_url	                ol_txn_detail.otd_success_callback_url%type,
       in_failure_callback_url			ol_txn_detail.otd_failure_callback_url%type,
       in_create_user                           ol_txn_detail.otd_create_user%type,
       in_update_user                           ol_txn_detail.otd_update_user%type,       
       in_encrypt_type				ol_txn_detail.otd_encrypt_type%type,
       in_version_no				ol_txn_detail.otd_version_no%type,
       in_remark				ol_txn_detail.otd_remark%type,
       in_banner_logo                           ol_txn_detail.otd_banner_logo%type,
       in_echo_msg_1                            ol_txn_detail.otd_echo_msg_1%type,
       in_echo_msg_2                            ol_txn_detail.otd_echo_msg_2%type,
       in_echo_msg_3                            ol_txn_detail.otd_echo_msg_3%type,
       in_opt_1                                 ol_txn_detail.otd_opt_1%type,
       in_opt_2                                 ol_txn_detail.otd_opt_2%type,
       in_opt_3                                 ol_txn_detail.otd_opt_3%type
	
)
  RETURN NUMBER IS
Begin
     Update ol_txn_detail
            Set otd_txn_ccy = in_txn_ccy,
                  otd_txn_country = in_txn_country,
		  otd_pay_method = in_pay_method,
		  otd_deposit_datetime = in_deposit_datetime,
		  otd_bank_acct_num = in_bank_acct_num,
		  otd_deposit_bank = in_deposit_bank,
		  otd_deposit_ref = in_deposit_ref,
		  otd_bank_code = in_bank_code,
		  otd_bank_name = in_bank_name,
		  otd_branch_name = in_branch_name,
		  otd_account_id = in_account_id,
		  otd_account_name = in_account_name,
		  otd_identity_id = in_identity_id,
		  otd_province = in_province,
		  otd_phone_no = in_phone_no,
		  otd_city = in_city,
		  otd_batch_id = in_batch_id,
                  otd_language = in_language,
                  otd_success_url = in_success_url,
		  otd_failure_url = in_failure_url,
                  otd_success_callback_url = in_success_callback_url,
		  otd_failure_callback_url = in_failure_callback_url,
                  otd_update_user = in_update_user,
                  otd_update_timestamp = Sysdate,
		  otd_encrypt_type=in_encrypt_type,
		  otd_version_no = in_version_no,
		  otd_remark = in_remark,
		  otd_banner_logo = in_banner_logo,
		  otd_echo_msg_1 = in_echo_msg_1,
		  otd_echo_msg_2 = in_echo_msg_2,
		  otd_echo_msg_3 = in_echo_msg_3,
		  otd_opt_1 = in_opt_1,
		  otd_opt_2 = in_opt_2,
		  otd_opt_3 = in_opt_3
      Where otd_txn_id = in_txn_id;

     IF SQL%ROWCOUNT = 0 THEN
        insert into ol_txn_detail
                     (otd_txn_id,
		      otd_txn_ccy,
		      otd_txn_country,
		      otd_pay_method,
		      otd_deposit_datetime,
		      otd_bank_acct_num,
		      otd_deposit_bank,
		      otd_deposit_ref,
                      otd_bank_code,
                      otd_bank_name,
                      otd_branch_name,
                      otd_account_id,
                      otd_account_name,
                      otd_identity_id,
                      otd_province,
                      otd_phone_no,
                      otd_city,
                      otd_batch_id,
		      otd_language,
		      otd_success_url,
		      otd_failure_url,
		      otd_success_callback_url,
		      otd_failure_callback_url,
                      otd_create_user,
                      otd_create_timestamp,
                      otd_update_user,
                      otd_update_timestamp,
		      otd_encrypt_type,
		      otd_version_no,
		      otd_remark,
		      otd_banner_logo,
                      otd_echo_msg_1,
                      otd_echo_msg_2,  
                      otd_echo_msg_3,
                      otd_opt_1,
                      otd_opt_2,
                      otd_opt_3)
          values(in_txn_id,
		     in_txn_ccy,
                     in_txn_country,
		     in_pay_method,
		     in_deposit_datetime,
		     in_bank_acct_num,
		     in_deposit_bank,
		     in_deposit_ref,
		     in_bank_code,
		     in_bank_name,
		     in_branch_name,
		     in_account_id,
		     in_account_name,
		     in_identity_id,
		     in_province,
		     in_phone_no,
		     in_city,
		     in_batch_id,
		     in_language,
		     in_success_url,
		     in_failure_url,
		     in_success_callback_url,
		     in_failure_callback_url,
                     in_create_user,
                     sysdate,
                     in_update_user,
                     sysdate,
		     in_encrypt_type,
		     in_version_no,
                     in_remark,
		     in_banner_logo,
                     in_echo_msg_1,
                     in_echo_msg_2,
                     in_echo_msg_3,
                     in_opt_1,
                     in_opt_2,
                     in_opt_3);

          IF SQL%ROWCOUNT = 0 THEN
             RETURN 1;
          ELSE
             RETURN 0;
          END IF;
      Else
          Return 0;
       End If;

EXCEPTION
  WHEN OTHERS THEN
     RETURN 9;
end sp_ol_txn_detail_insert;
/
