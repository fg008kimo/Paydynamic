DROP FUNCTION SP_MERCH_DETAIL_INSERT;

CREATE OR REPLACE FUNCTION sp_merch_detail_insert(
	in_merchant_id		merch_detail.merchant_id%type,
	in_client_id		merch_detail.client_id%type,
	in_name			merch_detail.name%type,
        in_disabled		merch_detail.disabled%type,
	in_merchant_type	merch_detail.merchant_type%type,
	in_approximate_fee_rate merch_detail.approximate_fee_rate%type,
	in_status 		merch_detail.status%type,
	in_allow_reserved       merch_detail.allow_reserved%type,
        in_release_reserved_period    merch_detail.release_reserved_period%type,
        in_allow_payout_dup_merch_ref merch_detail.allow_payout_dup_merch_ref%type,
	in_settlement_process_period  merch_detail.settlement_process_period%type,
	in_support_auto_sett	merch_detail.support_auto_sett%type,
	in_auto_sett_id		merch_detail.auto_sett_id%type,
	in_create_user		merch_detail.create_user%type)
  RETURN NUMBER IS

BEGIN
  INSERT INTO merch_detail(
	merchant_id,
	client_id,
	name,
        disabled,
	merchant_type,
	approximate_fee_rate,
	status,
        allow_reserved,
        release_reserved_period,
        allow_payout_dup_merch_ref,
	settlement_process_period,
	support_auto_sett,
	auto_sett_id,
	create_timestamp,
	create_user,
        update_timestamp,
        update_user
	)

  VALUES(
	in_merchant_id,
	in_client_id,
	in_name,
        in_disabled,
	in_merchant_type,
	in_approximate_fee_rate,
	in_status,
        in_allow_reserved,
        in_release_reserved_period,
        in_allow_payout_dup_merch_ref,
	in_settlement_process_period,
	in_support_auto_sett,
	in_auto_sett_id,
	sysdate,
	in_create_user,
        sysdate,
        in_create_user
	);

  IF SQL%ROWCOUNT = 0 THEN
     RETURN 1;
  ELSE
     RETURN 0;
  END IF;

EXCEPTION
  WHEN OTHERS THEN
     RETURN 9;

END sp_merch_detail_insert;
/

