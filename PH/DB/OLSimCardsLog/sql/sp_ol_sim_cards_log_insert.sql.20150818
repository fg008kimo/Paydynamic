CREATE OR REPLACE FUNCTION sp_ol_sim_cards_log_insert (
   in_mobile	ol_sim_cards_log.oscl_mobile%TYPE)
   RETURN NUMBER
IS
BEGIN
   INSERT INTO ol_sim_cards_log (OSCL_MOBILE,
				  OSCL_LOG_SEQ,
				  OSCL_CARRIERS,
				  OSCL_COUNTRY,
				  OSCL_OWNER_NAME,
				  OSCL_SIM_CREDIT,
				  OSCL_SIM_PACKAGE,
				  OSCL_SIM_CURRENCY,
				  OSCL_BILLED_DATE,
				  OSCL_LAST_TOPUP_DATE,
				  OSCL_NEXT_TOPUP_DATE,
				  OSCL_EXPIRED_DATE,
				  OSCL_PASSWORD,
				  OSCL_STATUS,
				  OSCL_REMARKS,
				  OSCL_CREATE_TIMESTAMP,
				  OSCL_CREATE_USER,
				  OSCL_UPDATE_TIMESTAMP,
                                  OSCL_UPDATE_USER)
      (SELECT OSC_MOBILE,
              (SELECT NVL (MAX (oscl_log_seq), 0) + 1
                 FROM ol_sim_cards_log
                WHERE     oscl_mobile = in_mobile),
              OSC_CARRIERS,
              OSC_COUNTRY,
              OSC_OWNER_NAME,
              OSC_SIM_CREDIT,
              OSC_SIM_PACKAGE,
              OSC_SIM_CURRENCY,
              OSC_BILLED_DATE,
              OSC_LAST_TOPUP_DATE,
              OSC_NEXT_TOPUP_DATE,
	      OSC_EXPIRED_DATE,
              OSC_PASSWORD,
              OSC_STATUS,
              OSC_REMARKS,
              OSC_CREATE_TIMESTAMP,
              OSC_CREATE_USER,
              OSC_UPDATE_TIMESTAMP,
              OSC_UPDATE_USER
         FROM ol_sim_cards
        WHERE osc_mobile = in_mobile);

   IF SQL%ROWCOUNT = 0
   THEN
      RETURN 1;
   ELSE
      RETURN 0;
   END IF;
EXCEPTION
   WHEN OTHERS
   THEN
      RETURN 9;
END sp_ol_sim_cards_log_insert;
/

