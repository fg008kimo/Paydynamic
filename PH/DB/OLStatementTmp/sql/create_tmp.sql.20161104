DROP TABLE OL_STATEMENT_TMP CASCADE CONSTRAINTS;

CREATE TABLE OL_STATEMENT_TMP
(
  OLST_FILE_ID             NUMBER(16),
  OLST_SEQ                 INTEGER,
  OLST_VER                 INTEGER,
  OLST_LATEST_VER          INTEGER,
  OLST_DISABLED            INTEGER                DEFAULT 0,
  OLST_INT_BANK_CODE       VARCHAR2(10 BYTE),
  OLST_BANK_ACCT_NUM       VARCHAR2(50 BYTE),
  OLST_SYS_SEQ             INTEGER,
  OLST_USER_SEQ            INTEGER,
  OLST_SKIP                INTEGER                DEFAULT 0,
  OLST_RAW_DATE            VARCHAR2(255 BYTE),
  OLST_RAW_TIME            VARCHAR2(255 BYTE),
  OLST_STATEMENT_DATE      VARCHAR2(8 BYTE),
  OLST_STATEMENT_TIME      VARCHAR2(6 BYTE),
  OLST_TFR_BANK_NAME       VARCHAR2(511 BYTE),
  OLST_TFR_BANK_ACCT_NUM   VARCHAR2(511 BYTE),
  OLST_TFR_TYPE            VARCHAR2(511 BYTE),
  OLST_TFR_CHANNEL         VARCHAR2(511 BYTE),
  OLST_TFR_TEXT            VARCHAR2(511 BYTE),
  OLST_TFR_CUSTOMER_TEXT   VARCHAR2(511 BYTE),
  OLST_SENDER_NAME         VARCHAR2(511 BYTE),
  OLST_TXN_REF_NUM         VARCHAR2(511 BYTE),
  OLST_BALANCE             VARCHAR2(255 BYTE),
  OLST_AMT_TYPE            VARCHAR2(255 BYTE),
  OLST_TXN_AMOUNT          VARCHAR2(255 BYTE),
  OLST_BANK_CHARGE         VARCHAR2(255 BYTE),
  OLST_CREATE_TIMESTAMP    DATE                   DEFAULT sysdate,
  OLST_CREATE_USER         VARCHAR2(20 BYTE),
  OLST_UPDATE_TIMESTAMP    DATE                   DEFAULT sysdate,
  OLST_UPDATE_USER         VARCHAR2(20 BYTE),
  OLST_SENDER_BAID_NAME    VARCHAR2(100 BYTE),
  OLST_RECIPIENT_BAID_NAME VARCHAR2(100 BYTE),
  OLST_CLIENT_NAME 	   VARCHAR2(50 BYTE)
)
TABLESPACE USER_DATA
RESULT_CACHE (MODE DEFAULT)
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX OL_STATEMENT_TMP_PK ON OL_STATEMENT_TMP
(OLST_FILE_ID, OLST_SEQ, OLST_VER)
LOGGING
TABLESPACE USER_IDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;

CREATE INDEX OL_STATEMENT_TMP_IDX01 ON OL_STATEMENT_TMP
(OLST_FILE_ID, NVL(OLST_LATEST_VER, -99), OLST_VER)
LOGGING
TABLESPACE USER_IDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;

CREATE INDEX OL_STATEMENT_TMP_IDX02 ON OL_STATEMENT_TMP
(OLST_CREATE_TIMESTAMP)
LOGGING
TABLESPACE USER_IDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;

CREATE INDEX OL_STATEMENT_TMP_IDX03 ON OL_STATEMENT_TMP
(OLST_UPDATE_TIMESTAMP)
LOGGING
TABLESPACE USER_IDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;

CREATE INDEX OL_STATEMENT_TMP_IDX04 ON OL_STATEMENT_TMP
(OLST_INT_BANK_CODE, OLST_BANK_ACCT_NUM, OLST_RAW_DATE, OLST_TXN_AMOUNT, OLST_BALANCE, OLST_RAW_TIME)
LOGGING
TABLESPACE USER_IDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


ALTER TABLE OL_STATEMENT_TMP ADD (
  CONSTRAINT OL_STATEMENT_TMP_PK
  PRIMARY KEY
  (OLST_FILE_ID, OLST_SEQ, OLST_VER)
  USING INDEX OL_STATEMENT_TMP_PK
  ENABLE VALIDATE);


ALTER TABLE OL_STATEMENT_TMP ADD (
  CONSTRAINT OL_STATEMENT_TMP_FK01
  FOREIGN KEY (OLST_INT_BANK_CODE, OLST_BANK_ACCT_NUM) 
  REFERENCES OL_BANK_ACCTS (OB_INT_BANK_CODE,OB_BANK_ACCT_NUM)
  ENABLE VALIDATE);

