CREATE OR REPLACE FUNCTION sp_client_magic_delete(
	in_client_id		client_magic.cm_client_id%type,
	in_cust_id		client_magic.cm_cust_id%type,
	in_create_user		client_magic.cm_create_user%type
	)
  RETURN NUMBER IS

BEGIN
  UPDATE client_magic
	SET cm_disabled = 1,
            cm_update_user = in_create_user,
	    cm_update_timestamp = sysdate
	WHERE	cm_client_id=in_client_id
	AND	cm_cust_id=in_cust_id;


  IF SQL%ROWCOUNT = 0 THEN
     RETURN 1;
  ELSE
     RETURN 0;
  END IF;

EXCEPTION
  WHEN OTHERS THEN
     RETURN 9;

END sp_client_magic_delete;
/
