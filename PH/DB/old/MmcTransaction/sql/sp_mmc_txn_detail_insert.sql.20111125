create or replace function sp_mmc_txn_detail_insert(
       in_txn_id                                mmc_txn_detail.mcd_txn_id%type,
       in_src_party_type			mmc_txn_detail.mcd_src_party_type%type,
       in_src_party_id				mmc_txn_detail.mcd_src_party_id%type,
       in_dst_party_type			mmc_txn_detail.mcd_dst_party_type%type,
       in_dst_party_id				mmc_txn_detail.mcd_dst_party_id%type,
       in_transmission_datetime	 	 	mmc_txn_detail.mcd_transmission_datetime%type,
       in_src_txn_amt				mmc_txn_detail.mcd_src_txn_amt%type,
       in_src_txn_ccy				mmc_txn_detail.mcd_src_txn_ccy%type,
       in_dst_txn_amt				mmc_txn_detail.mcd_src_txn_amt%type,
       in_dst_txn_ccy				mmc_txn_detail.mcd_src_txn_ccy%type,
       in_src_adjustment			mmc_txn_detail.mcd_src_adjustment%type,
       in_exchange_rate				mmc_txn_detail.mcd_exchange_rate%type,
       in_src_processing_cost			mmc_txn_detail.mcd_src_processing_cost%type,
       in_dst_processing_cost			mmc_txn_detail.mcd_dst_processing_cost%type,
       in_bank_charge				mmc_txn_detail.mcd_bank_charge%type,
       in_bank_charge_refund			mmc_txn_detail.mcd_bank_charge_refund%type,
       in_filing_number				mmc_txn_detail.mcd_filing_number%type,
       in_create_user				mmc_txn_detail.mcd_create_user%type,
       in_update_user				mmc_txn_detail.mcd_update_user%type
)
  RETURN NUMBER IS
Begin
     Update mmc_txn_detail
     	set mcd_src_party_type = in_src_party_type,
	    mcd_src_party_id = in_src_party_id,
     	    mcd_dst_party_type = in_dst_party_type,
	    mcd_dst_party_id = in_dst_party_id,
	    mcd_transmission_datetime = in_transmission_datetime,
	    mcd_src_txn_amt = in_src_txn_amt,
	    mcd_src_txn_ccy = in_src_txn_ccy,
	    mcd_dst_txn_amt = in_dst_txn_amt,
	    mcd_dst_txn_ccy = in_dst_txn_ccy,
	    mcd_src_adjustment = in_src_adjustment,
	    mcd_exchange_rate = in_exchange_rate,
	    mcd_src_processing_cost = in_src_processing_cost,
	    mcd_dst_processing_cost = in_dst_processing_cost,
	    mcd_bank_charge = in_bank_charge,
	    mcd_bank_charge_refund = in_bank_charge_refund,
	    mcd_filing_number = in_filing_number
      Where mcd_txn_id = in_txn_id;

     IF SQL%ROWCOUNT = 0 THEN
        insert into mmc_txn_detail
                     (mcd_txn_id,
		      mcd_src_party_type,
		      mcd_src_party_id,
		      mcd_dst_party_type,
		      mcd_dst_party_id,
		      mcd_transmission_datetime,
		      mcd_src_txn_amt,
		      mcd_src_txn_ccy,
		      mcd_dst_txn_amt,
		      mcd_dst_txn_ccy,
		      mcd_src_adjustment,
		      mcd_exchange_rate,
		      mcd_src_processing_cost,
		      mcd_dst_processing_cost,
		      mcd_bank_charge,
		      mcd_bank_charge_refund,
		      mcd_filing_number,
                      mcd_create_user,
                      mcd_create_timestamp,
                      mcd_update_user,
                      mcd_update_timestamp
                      )
          values(in_txn_id,
		     in_src_party_type,
		     in_src_party_id,
		     in_dst_party_type,
		     in_dst_party_id,
		     in_transmission_datetime,
                     in_src_txn_amt,
		     in_src_txn_ccy,
		     in_dst_txn_amt,
		     in_dst_txn_ccy,
		     in_src_adjustment,
		     in_exchange_rate,
		     in_src_processing_cost,
		     in_dst_processing_cost,
		     in_bank_charge,
		     in_bank_charge_refund,
		     in_filing_number,
                     in_create_user,
                     sysdate,
                     in_update_user,
                     sysdate
                     );

          IF SQL%ROWCOUNT = 0 THEN
             RETURN 1;
          ELSE
             RETURN 0;
          END IF;
      Else
          Return 0;
       End If;

EXCEPTION
  WHEN OTHERS THEN
     RETURN 9;
end sp_mmc_txn_detail_insert;
/
