/*
Partnerdelight (c)2012. All rights reserved. No part of this software may be reproduced in any form without written permission
of an authorized representative of Partnerdelight.

Change Description                                 Change Date             Change By
-------------------------------                    ------------            --------------
Init Version                                       2012/02/03              Cody Chan
*/

#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <sqlca.h>
#include <sqlcpr.h>
#include "common.h"
#include "utilitys.h"
#include "batchcommon.h"

char	cDebug;
#define SQLCA_STORAGE_CLASS extern
#define SQLCODE sqlca.sqlcode

int Extract_RPT001(const char* csFileName, SQL_CURSOR c_input_cursor)
{
	int	iRet = SUCCESS;

DEBUGLOG(("Extract_RPT001\n"));
	EXEC SQL WHENEVER SQLERROR GOTO extract_rpt001_error;
        EXEC SQL WHENEVER NOTFOUND CONTINUE;
		varchar	v_txn_id[PD_TXN_ID_LEN +1];
		varchar	v_txn_code[PD_TXN_CODE_LEN +1];
		varchar	v_txn_code_desc[PD_DESC_LEN +1];
		double	v_open_bal;
		double	v_current_bal;
		varchar	v_txn_element_type[PD_TXN_ELEMENT_TYPE_LEN +1];
		varchar	v_txn_element_type_desc[PD_DESC_LEN +1];
		int	v_exec_seq;
		varchar	v_ccy[PD_CCY_ID_LEN +1];
		varchar	v_amt_type[PD_AMOUNT_TYPE_LEN +1];
		double	v_bal;

		short	ind_txn_id = -1;
		short	ind_txn_code = -1;
		short	ind_txn_code_desc = -1;
		short	ind_open_bal = -1;
		short	ind_current_bal = -1;
		short	ind_txn_element_type = -1;
		short	ind_txn_element_type_desc = -1;
		short	ind_exec_seq = -1;
		short	ind_ccy = -1;
		short	ind_amt_type = -1;
		short	ind_bal = -1;
        EXEC SQL BEGIN DECLARE SECTION;

	int i = 0;
	for (i = i; i < 2; i++) {

/*
		EXEC SQL WHENEVER NOTFOUND DO break;
		EXEC SQL FETCH :c_inout_cursor
		INTO
			:v_txn_id:ind_txn_id,
			:v_txn_code:ind_txn_code,
			:v_txn_code_desc:ind_txn_code_desc,
			:v_open_bal:ind_open_bal,
			:v_current_bal:ind_current_bal,
			:v_txn_element_type:ind_txn_element_type,
			:v_txn_element_type_desc:ind_txn_element_type_desc,
			:v_exec_seq:ind_exec_seq,
			:v_ccy:ind_ccy,
			:v_amt_type:ind_amt_type,
			:v_bal:ind_bal;
*/
	}
	return iRet;
extract_rpt001_error:
DEBUGLOG(("extract_rpt001 code %d\n", sqlca.sqlcode));
DEBUGLOG(("\n%.*s\n", sqlca.sqlerrm.sqlerrml, sqlca.sqlerrm.sqlerrmc));
        EXEC SQL WHENEVER SQLERROR CONTINUE;
        return FAILURE;
}
